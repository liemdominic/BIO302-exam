---
title: "BIO302 exam Part A"
author: "Liem Oeastraadt-Jennings"
format: html
editor: visual
date: 29.06.2023
---

## Part A - reproducibility

1.  Continue with your attempt to reproduce part of a paper from archived data from the first practical. Archive the code and text on GitHub and include the link to your repo in your answer here.

    Link to repo: https://github.com/liemdominic/BIO302-exam/blob/main/BIO302%20part%20A.qmd

```{r}
library(ggplot2) 
library(tidyverse) 
library(readr) 
library(here) 
library(usethis) 
use_git_config(   user.name = "liemdominic",    
                  user.email = "lje006@uib.no"   ) 
usethis::create_github_token() 
usethis::use_git()
git_vaccinate()
use_github()
```

```{r}
## Importing data coral_cover.csv
coral_cover_data <- read.csv(here("coral_cover.csv")) |>
janitor::clean_names()

view(coral_cover_data)

# Plotting
coral_cover_plot <- ggplot(coral_cover_data, #give the plot a name
       aes(x = site, 
           y = mean_coral_cover, 
           fill = as.factor(year))) + #continous scale issue when year not a factor
  geom_col(position = "dodge") + #to get col's side by side
  labs(x = "Site", 
       y = "Coral Coverage (%)", 
       fill = "Year") +
  scale_fill_manual(values = c("blue", "red")) + #figure in paper had blue and red colours, not exactly sure which shade used.
  theme_bw() +
  scale_x_continuous(breaks = unique(as.numeric(coral_cover_data$site))) #to get a continous scale on x axis

coral_cover_plot
```

I tried to reproduce figure 2c) from the paper Cook et al., 2022. Looking at the data they have published which i downloaded from: https://datadryad.org/stash/dataset/doi:10.5061/dryad.9ghx3ffk7 - I can see that they have cleaned the data a lot, and that only the specific data for the figure is published. The data for the figure is called "coral_cover.csv". I am not sure if the data has been cleaned with code or if it has been cleaned using another data managing program. To try to understand how they had cleaned the data i read the methods (Cook et al., 2022) and readme.txt file, also available for download. According to the methods and readme.txt, all data has been analysed with R, but the data cleaning procedure is not specifically mentioned.

The colour and legend are not the same as in the article figure, but those are reproducible with known choice of colour and legend location coordinates. I did not use unneccessary time trying to reproduce these.

Reproducing the figure went well, but understanding how the data cleaning process was done was not possible (Cook et al., 2022). Understanding the whole figure by itself is not possible, other than understanding that there is a visual difference between mean coral coverage at the times surveyed. Visual surveys by SCUBA diving was the method used and mean percentage coverage across the site-specific quadrants was calculated using scleractinian coral quadrat data. To reproduce the figure completely i would need the coordinates for the offset of legend and the colour scheme they chose. In the data coral_cover.csv, data points are from year 1976 and 2018, but in the figure 2c (Cook et al., 2022), the year's in the legend says: 1975 and 2018. Figure text explains that the visual survey was done in the years 1975-1976 and 2018. Why the legend shows only year 1975 i do not know, as the data shows only year 1976 and 2018. An explenation of this would leave less uncertainty to what this means.

16 data points for 1976 and 16 data points for 2018 were available in the coral_cover.csv file. Data was represented in year, site and mean coral coverage (%). I used janitor::clean_names to format the data column names. I used "here" to create a pathway that does not need Rstudio and creates a file path that locates the file from any other project root. I have commented the steps in my code so that my code is hopefully understandable by others.

Not sure how to cite the data.

Sources:

Cook, K.M. et al. (2022) "A community and functional comparison of coral and reef fish assemblages between four decades of coastal urbanisation and thermal stress," Ecology and evolution, 12(3), pp. e8736-n/a.

## Part B data analysis

1.  A colleague is testing the effect of a treatment on fish growth. They have ten tanks (five for each treatment). Each tank with ten fish. They plan to fit the model

lm(growth \~ treatment, data = fish_data)

-   What is wrong with this plan?
-   Show, by simulation, the problems with this model for these data.
-   Suggest a better model and show that it performs better.

2.  You review a paper with the following text.

> "The effect size was small (r = 0.124). However artificially amplifying the sample by a factor of two (from n = 54 to n = 108) yielded a significant result (p = 0.043) suggesting that a future larger study might be able to detect a positive benefit for \[our treatment\]."

What advice do you give the authors?

3.  The `lynx` data (available with-in R) show the number of lynx (norsk: gaupe) trapped in Canada in 1821-1934. Plot the data then examine the acf and pacf for these data. What can you infer from these about the type of autocorrelation in these data?

4.  Chironomid species richness has been recorded in some Norwegian lakes. Three predictor variables are available, water temperature, depth and pH. We want to test the hypothesis that species richness is related to temperature.

The data are in the file chironomid.txt.

-   What distribution could be assumed for the response variable?
-   What type of analysis is appropriate?
-   Fit an appropriate parametric model to test the hypothesis.
-   Check the model diagnostics. Justify any changes you need to make to the model.
-   Predict species richness at -5, 5, and 30Â°C and show the 95% confidence intervals.
-   Present the results using both graphs and tables.
-   Write a biological interpretation of your model.

## Instructions

Write in a quarto document and submit the rendered version. Make sure that any figures are included in you submission.

Upload your answer to mitt.uib
